<div align="center" style="display:grid;place-items:center;">
	<p>
	    <a href="https://gitee.com/cryingn/ezgal" target="_blank"><img width="180" src="./ezgal/image/icon.png" alt="ezgal logo"></a>
	<h1>ezgal</h1>
	</p>
    <div style="display: flex; gap: 10px;">
		<img src="https://gitcode.com/godothub/ezgal/star/badge.svg?style=flat-square">
		<img src="https://img.shields.io/github/stars/Godothub/ezgal.svg">
	</div>
</div>



[English](./README.md)|[中文](./README.ZH.md)|日本語

これはgodot.monoに基づいてgalgameの開発を容易にするための一連のフレームワークです。

<img src="./docs/public/example.png" />

## 説明

2023年11月に、godot3の**godot-ezgal**フレームワークを初歩的に実現しましたが、拡張性の問題でメンテナンスを断念し、現在フレームワークの書き換えを行っています。以下は現在の新しい**ezgal**フレームワークの特性です：

| 説明          | ezgal                                                                                                                          | 説明者     |
| ----------- | ------------------------------------------------------------------------------------------------------------------------------ | ------- |
| godotバージョン  | Godot4（継続的な互換性を考慮）                                                                                                             | cryingn |
| 開発言語        | C#（net8.0以上のバージョン）                                                                                                             | cryingn |
| 開発モード       | 2種類の開発モードをサポート：[深層組み込み](#深層組み込み)は1つのファイルにパッケージ化しやすく、より多くの機能を開発し、[低コード開発](#低コード開発)はインターフェースを通じて直接コンパイルファイルを開発プログラムとして書き込むことができる | cryingn |
| ezgalインタプリタ | シナリオファイルをjson形式に解釈し、段落ごとに読み取る                                                                                                  | cryingn |
| シナリオ文法      | 中国語/英語/日本語の三言語（`./make/FlowData.cs`で言語のカスタマイズが可能）                                                                              | cryingn |
| シナリオ言語      | 中国語（短期間で中/英語法をサポートし、将来はカスタムスクリプト言語をサポートする予定）                                                                                   | cryingn |
| wiki言語      | 中国語/英語/日本語の三言語                                                                                                                 | cryingn |

## 使用方法

### 深層組み込み

ソースコードを直接プロジェクトにクローンし、**ezgal**フォルダをgodotにインポートして開発を続けることができます：

```bash
git clone https://atomgit.com/godothub/ezgal
cd ezgal/ezgal
```
or

```bash
git clone https://gitee.com/godothub/ezgal.git
cd ezgal/ezgal
```

編集が完了した後、プログラムを1つにパッケージ化するには、**make**フォルダを`./ezgal/code/FlowData.cs`フォルダにパッケージ化してコンパイルできます。パッケージ化方法は以下の通りです：

```bash
dotnet run --project make build jp
```

godotでコンパイルされたプログラムはフォルダに依存せずに実行できます。ファイルの編集状態に戻す必要がある場合は、以下のコマンドを使用して戻すことができます：

```bash
dotnet run --project make edit jp
```

### 低コード開発

（これは将来のezgalの主流の開発方法であり、プログラムの外部でフォルダの内容を変更するだけで開発が可能）

バイナリファイルを取得した後も、直接ファイルの外部のフォルダ内容を編集することで、スクリプト/イラスト/辞書/音楽などのリソースの変更が可能です。

## 文法

シナリオの執筆をより直感的にするために、セリフと演出は分離して書く形式を採用しています。以下では、セリフと演出についてそれぞれ説明します：

### セリフ

セリフは`ダイアログ`ボックスで表示できます：

```
[ダイアログ]
これはダイアログボックスの表示方式です
少女:これはダイアログボックスでの少女の話し方です
```

また、`フルスクリーン`で表示することもできます：

```
[フルスクリーン]
フルスクリーンは複数の段落の内容を表示することをサポートします
しかし、キャラクターの発言はサポートしません
フルスクリーン状態では同時に12行の発言が可能です
[フルスクリーン]
行数を事前に切り替えるために再定義することもできます
```

`オプション`の表示方式は`ダイアログボックス`と`フルスクリーン`と同じですが、オプションの内容を保存し、プレイヤーに選択させることができます：

```
[オプション]
{script:测试3.txt}テスト3にジャンプ
{jump:循环1}ループ1にジャンプ
続ける
[フルスクリーン]
フルスクリーンを選択するとこの文章が見えます
```

セリフはbbcode文法をサポートしており、以下の方法で専門用語を定義できます：

```
[フルスクリーン]
これは[url=専門用語]専門用語[/url]です
```

専門用語を選択すると辞書ボックスが表示され、dictionaryフォルダに`専門用語.txt`ファイルを定義することで、専門用語の設定を実現できます。

### 演出

シナリオの位置に戻る必要がある場合は、`@`を使用してジャンプの**マーク位置**を設定できます。例えば以下の方式：

```
@循环1
ここは無限ループです
{jump:循环1}
```

ジャンプすると`@ループ1`の位置に戻ります。**マーク位置**の設定以外の演出方式は、統一的に大括弧で管理します。例えば以下の方式：

```
{bg:封面.png}#表紙に切り替える
{少女:normal.png-1200x650-1.1}少女:こんにちは#イラストを設定
{script:测试2.txt, jump:循环1}#テスト2スクリプトのループ1位置にジャンプ
```

以下に大括弧のパラメータを定義します：

| パラメータ     | 説明                                                                                                  | 例                          |
| --------- | --------------------------------------------------------------------------------------------------- | -------------------------- |
| bg        | 背景を設定します。背景は`./image/background/`フォルダにあるべきです                                                        | bg:封面.png                  |
| script    | 設定されたスクリプト位置にジャンプします                                                                                | script:测试3.txt             |
| jump      | 設定された**マーク位置**にジャンプします                                                                              | jump:循环1                   |
| ef        | 特殊効果を設定するために使用したいが、まだ実装されていません                                                                      |                            |
| [default] | キャラクターのイラストを設定するために使用します。[default]は`./image/`フォルダに対応する名前を持ち、定義された名前は`[画像名]-[画像高さ]x[画像幅]-[拡大縮小比率]`です | 少女:normal.png-1200x650-1.1 |
## 謝辞

- ezgalプロジェクトは[Godot Engine](https://godotengine.org/)エンジンに基づいています。
- [100font](https://www.100font.com/)が提供するフォント資源に感謝します。
- godot-ezgal、ezgalプロジェクトは当初、VYCMaのオープンソース中国コミュニティによって監督されていました。
- ezgalプロジェクトは現在、[Godot Hubコミュニティ](https://godothub.com/)によってメンテナンスされています。
- 貢献と設計に参加したすべての個人に感謝します。